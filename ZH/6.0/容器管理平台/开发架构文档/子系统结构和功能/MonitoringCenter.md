# 监控中心

![-w200](../media/0ec07954fe93fe809e9ecef823ae764d.png)
<center>监控中心架构图</center>

## 监控模块

**基础性能拉取：** 以分钟为粒度从 Prometheus，拉取过来的告警将被后续模块处理分析。

**事件拉取：** 以分钟为粒度，从 Thanos API，BCS API 事件源拉取事件告警，拉取过来的告警经过清洗后，将被后续模块处理分析。

**异常检测：** 对基础性能告警，根据监控指标以及触发条件进行异常检测计算。

## 告警模块

**告警清洗、匹配：** 对参数的告警，对不符合规则的告警进行过滤。

**告警屏蔽：** 对符合屏蔽规则的告警进行屏蔽。

**告警收敛：** 对符合收敛条件的告警进行过滤，避免产生重复的无意义的告警处理。

**告警通知：** 根据用户配置的告警通知方式和通知人，进行具体的通知消息推送。

## Dashboard

![-w200](../media/8b5257a73b3d27922c82b568fcde1fa6.png)
<center>Dashboard架构图</center>

Dashboard 是容器监控数据展示模块，用户可以按照一个语法规则(Prometheus)，或者拖拽选择，完成业务特定的监控视图，同时平台也会提供三个默认视图：BCS-Cluster，BCS-Node，BCS-Pod。

Dashboard 底层基于 Grafana 做二次开发，主要新增三个模块，作用分别是:

**Bcs auth:** 和产品权限保证统一，做权限统一封装，底层通过自动新建，删除用户，org 等。

**Bcs datasource:** 自动打通数据源，用户可以直接配置，不需要收到添加数据源配置等。

**Bcs plugin:** 自定义 panel 元素，集群等数据源限制查询函数，展示优化等。

**API适配层：** 后端对接多个数据源，前端统一提供语法等(限集群数据)，Prometheus API 服务等封装。
