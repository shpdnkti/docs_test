# 数据开发服务主要性能指标

数据计算服务性能测试主要分两块：

>   1. 实时计算

>   2. 离线计算

>   注：测试总结出的主要性能指标均为特定环境下测试总结所得，可作为部署的参考，机器配置、部署策略、网络环境等因素都会影响最终使用结果。测试环境部署关系如下(各服务独立部署)：

## 实时计算性能

\- 机型：12 核 60G 内存 100G 磁盘

\- 测试结论

| 数据源                | 处理逻辑 | 处理数据量   |
|-----------------------|----------|--------------|
| 单 partition           | 无聚合   | 60 万/分钟    |
|                       | 有聚合   | 50 万/分钟    |
| n 个 partition（n\>=2） | 无聚合   | 35 万\*n/分钟 |
|                       | 有聚合   | 20 万\*n/分钟 |

## 离线计算性能

\- 机型：9 台服务器（32 核 、256G 内存、万兆网卡、 1T 数据盘）

\- 预估公式

离线计算总内存 = 节点数 \* （Nodemanager 内存配置） = 960G

离线计算总 CPU 核数 = 节点数 \* （Nodemanager CPU 配置）= 384U

单个离线任务占用资源预估值 = 执行器资源（16G，4U）\* 2 + AM 资源（1G，1U） =
（33G，9U）

同时可启动任务 =
min(（离线计算总内存/一个离线任务占用内存预估值），（离线计算总 cpu/单个离线任务占用 cpu 预估值）)
= 29 个

每个任务可处理行数 ≈ 2w 行

每分钟处理速度为 = （一小时内可以执行的最大任务数 \* 每个任务可处理行数 ）/ 60

\- 测试结论

1 小时可执行最大任务数 1680 个

可支撑调度任务最大并发值 280 个

一分钟处理数据量最大值 56w 行

## 调度系统性能

- 结论：

> 少量任务下（低于 500），runner 的内存使用率、CPU 使用率基本无影响

大量线程场景下，内存使用会急剧增加，CPU 使用率影响基本不大
