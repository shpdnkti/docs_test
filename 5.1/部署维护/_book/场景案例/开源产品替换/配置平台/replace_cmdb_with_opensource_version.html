
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>配置平台 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../标准运维/replace_sops_with_opensource_version.html" />
    
    
    <link rel="prev" href="../Paas平台/replace_paas_with_opensource_version.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">蓝鲸部署维护文档中心</li>
        
        
    

    
        
        <li class="header">部署指引</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../../../">
            
                <a href="../../../">
            
                    
                    部署方案
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../../../术语解释/GLOSSARY.html">
            
                <a href="../../../术语解释/GLOSSARY.html">
            
                    
                    术语解释
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../../../部署脚本/architecture.html">
            
                <a href="../../../部署脚本/architecture.html">
            
                    
                    架构设计
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../../../部署脚本/intro.html">
            
                <a href="../../../部署脚本/intro.html">
            
                    
                    部署脚本
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" >
            
                <span>
            
                    
                    基础包安装
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.5.1" data-path="../../../基础包安装/机器评估/evaluate.html">
            
                <a href="../../../基础包安装/机器评估/evaluate.html">
            
                    
                    机器评估
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.2" data-path="../../../基础包安装/环境准备/get_ready.html">
            
                <a href="../../../基础包安装/环境准备/get_ready.html">
            
                    
                    环境准备
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.3" data-path="../../../基础包安装/软件包简介/src_overview.html">
            
                <a href="../../../基础包安装/软件包简介/src_overview.html">
            
                    
                    软件包简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.4" data-path="../../../基础包安装/单机部署/install_on_single_host.html">
            
                <a href="../../../基础包安装/单机部署/install_on_single_host.html">
            
                    
                    单机部署
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.5" >
            
                <span>
            
                    
                    多机部署
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.5.5.1" data-path="../../../基础包安装/多机部署/quick_install.html">
            
                <a href="../../../基础包安装/多机部署/quick_install.html">
            
                    
                    标准部署
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.5.2" data-path="../../../基础包安装/多机部署/install_paas.html">
            
                <a href="../../../基础包安装/多机部署/install_paas.html">
            
                    
                    PaaS 部署详解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.5.3" data-path="../../../基础包安装/多机部署/install_cmdb.html">
            
                <a href="../../../基础包安装/多机部署/install_cmdb.html">
            
                    
                    CMDB 部署详解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.5.4" data-path="../../../基础包安装/多机部署/install_job.html">
            
                <a href="../../../基础包安装/多机部署/install_job.html">
            
                    
                    JOB 部署详解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.5.5" data-path="../../../基础包安装/多机部署/install_app_mgr.html">
            
                <a href="../../../基础包安装/多机部署/install_app_mgr.html">
            
                    
                    SaaS 部署详解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.5.6" data-path="../../../基础包安装/多机部署/install_bkdata.html">
            
                <a href="../../../基础包安装/多机部署/install_bkdata.html">
            
                    
                    BKDATA 部署详解
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.5.6" data-path="../../../基础包安装/环境验证/check.html">
            
                <a href="../../../基础包安装/环境验证/check.html">
            
                    
                    环境验证
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.6" >
            
                <span>
            
                    
                    增加包安装
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.6.1" >
            
                <span>
            
                    
                    容器管理平台安装
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.6.1.1" data-path="../../../增强包安装/机器评估/bcs_evaluate.html">
            
                <a href="../../../增强包安装/机器评估/bcs_evaluate.html">
            
                    
                    机器评估
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6.1.2" data-path="../../../增强包安装/环境准备/bcs_envprepare.html">
            
                <a href="../../../增强包安装/环境准备/bcs_envprepare.html">
            
                    
                    环境准备
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6.1.3" data-path="../../../增强包安装/部署安装/bcs_install.html">
            
                <a href="../../../增强包安装/部署安装/bcs_install.html">
            
                    
                    安装部署
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.7" >
            
                <span>
            
                    
                    SaaS 部署
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.7.1" data-path="../../../SaaS部署/通用部署/saasdeploy.html">
            
                <a href="../../../SaaS部署/通用部署/saasdeploy.html">
            
                    
                    通用部署
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7.2" data-path="../../../SaaS部署/标准运维/sops_install.html">
            
                <a href="../../../SaaS部署/标准运维/sops_install.html">
            
                    
                    标准运维
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.8" >
            
                <span>
            
                    
                    合作商软件包安装
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.8.1" data-path="../../../合作方软件包安装/网络管理/net_man.html">
            
                <a href="../../../合作方软件包安装/网络管理/net_man.html">
            
                    
                    网络管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.8.2" data-path="../../../合作方软件包安装/CICDKit/CICDKit.html">
            
                <a href="../../../合作方软件包安装/CICDKit/CICDKit.html">
            
                    
                    CICDKit
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.9" >
            
                <span>
            
                    
                    场景案例
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.9.1" data-path="../../离线部署/offline_setup.html">
            
                <a href="../../离线部署/offline_setup.html">
            
                    
                    离线部署安装的配置方法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.9.2" data-path="../../https改造方案/guide_converting_site_http_https.html">
            
                <a href="../../https改造方案/guide_converting_site_http_https.html">
            
                    
                    HTTPS 改造方案
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.9.3" >
            
                <span>
            
                    
                    开源产品替换指南
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.9.3.1" data-path="../opensource_readme.html">
            
                <a href="../opensource_readme.html">
            
                    
                    开源版本替换说明
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.9.3.2" data-path="../Paas平台/replace_paas_with_opensource_version.html">
            
                <a href="../Paas平台/replace_paas_with_opensource_version.html">
            
                    
                    PaaS 平台
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="2.9.3.3" data-path="replace_cmdb_with_opensource_version.html">
            
                <a href="replace_cmdb_with_opensource_version.html">
            
                    
                    配置平台
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.9.3.4" data-path="../标准运维/replace_sops_with_opensource_version.html">
            
                <a href="../标准运维/replace_sops_with_opensource_version.html">
            
                    
                    标准运维
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.9.3.5" data-path="../容器平台/bcs_opensource.html">
            
                <a href="../容器平台/bcs_opensource.html">
            
                    
                    容器管理平台
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">日常维护</li>
        
        
    
        <li class="chapter " data-level="3.1" >
            
                <span>
            
                    
                    维护手册
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="../../../维护手册/配置维护/configuration.html">
            
                <a href="../../../维护手册/配置维护/configuration.html">
            
                    
                    配置调整
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2" >
            
                <span>
            
                    
                    日常维护
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.2.1" data-path="../../../维护手册/日常维护/maintain.html">
            
                <a href="../../../维护手册/日常维护/maintain.html">
            
                    
                    统一术语
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.2" data-path="../../../维护手册/日常维护/login_srv.html">
            
                <a href="../../../维护手册/日常维护/login_srv.html">
            
                    
                    登陆指定服务器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.3" data-path="../../../维护手册/日常维护/logs.html">
            
                <a href="../../../维护手册/日常维护/logs.html">
            
                    
                    查看日志
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.4" data-path="../../../维护手册/日常维护/start_stop.html">
            
                <a href="../../../维护手册/日常维护/start_stop.html">
            
                    
                    组件启停
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.5" data-path="../../../维护手册/日常维护/disk_clean.html">
            
                <a href="../../../维护手册/日常维护/disk_clean.html">
            
                    
                    磁盘清理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.6" data-path="../../../维护手册/日常维护/change_domain.html">
            
                <a href="../../../维护手册/日常维护/change_domain.html">
            
                    
                    变更域名
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.7" data-path="../../../维护手册/日常维护/convert_https.html">
            
                <a href="../../../维护手册/日常维护/convert_https.html">
            
                    
                    HTTP 切换 HTTPS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.8" data-path="../../../维护手册/日常维护/change_http_port.html">
            
                <a href="../../../维护手册/日常维护/change_http_port.html">
            
                    
                    变更默认 HTTP 端口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.9" data-path="../../../维护手册/日常维护/update_cert.html">
            
                <a href="../../../维护手册/日常维护/update_cert.html">
            
                    
                    更新证书
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.10" data-path="../../../维护手册/日常维护/migrate_module.html">
            
                <a href="../../../维护手册/日常维护/migrate_module.html">
            
                    
                    迁移服务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.11" data-path="../../../维护手册/日常维护/add_appt.html">
            
                <a href="../../../维护手册/日常维护/add_appt.html">
            
                    
                    单机部署增加一台 APPT
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.12" data-path="../../../维护手册/日常维护/health_check.html">
            
                <a href="../../../维护手册/日常维护/health_check.html">
            
                    
                    健康检查
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="../../../维护手册/日常维护/host_reboot.html">
            
                <a href="../../../维护手册/日常维护/host_reboot.html">
            
                    
                    机器重启
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">升级卸载</li>
        
        
    
        <li class="chapter " data-level="4.1" >
            
                <span>
            
                    
                    升级指引
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" >
            
                <span>
            
                    
                    社区版升级至 V4.1
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1.1" data-path="../../../升级指引/update2V4.1/cev31_v41.html">
            
                <a href="../../../升级指引/update2V4.1/cev31_v41.html">
            
                    
                    社区版 V3.1 升级至 V4.1 指引
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.1.2" data-path="../../../升级指引/update2V4.1/cev40_v41.html">
            
                <a href="../../../升级指引/update2V4.1/cev40_v41.html">
            
                    
                    社区版 V4.0 升级至 V4.1 指引
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.1.3" data-path="../../../升级指引/update2V4.1/cev41_v41.x.html">
            
                <a href="../../../升级指引/update2V4.1/cev41_v41.x.html">
            
                    
                    社区版 V4.1 升级至 V4.1.16 指引
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.1.2" >
            
                <span>
            
                    
                    社区版升级至 V5.0
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.2.1" data-path="../../../升级指引/update2V5.0/cev416_v50.html">
            
                <a href="../../../升级指引/update2V5.0/cev416_v50.html">
            
                    
                    社区版 V4.1.16 升级至 v5.0 升级指引
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.1.3" >
            
                <span>
            
                    
                    社区版升级至 V5.1
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.3.1" data-path="../../../升级指引/update2V5.1/cev416_v51.html">
            
                <a href="../../../升级指引/update2V5.1/cev416_v51.html">
            
                    
                    社区版 V4.1.16 升级至 v5.1 升级指引
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3.2" data-path="../../../升级指引/update2V5.1/ce5.0update5.1.html">
            
                <a href="../../../升级指引/update2V5.1/ce5.0update5.1.html">
            
                    
                    社区版 V5.0 升级至 v5.1 升级指引
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.1.4" >
            
                <span>
            
                    
                    补丁包部署指引
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.4.1" data-path="../../../升级指引/update_patch/patch_update.html">
            
                <a href="../../../升级指引/update_patch/patch_update.html">
            
                    
                    社区版 V4.1.x 升级补丁包部署指引
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.4.2" data-path="../../../升级指引/update_patch/JobLog.html">
            
                <a href="../../../升级指引/update_patch/JobLog.html">
            
                    
                    社区版 V4.0 升级至 v5.0 JobLog 日志迁移指引
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.4.3" data-path="../../../升级指引/update_patch/upgrade.html">
            
                <a href="../../../升级指引/update_patch/upgrade.html">
            
                    
                    补丁包通用部署指南
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../../../卸载指引/uninstall.html">
            
                <a href="../../../卸载指引/uninstall.html">
            
                    
                    卸载指引
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">附录</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../../../附录/开源组件版本/version.html">
            
                <a href="../../../附录/开源组件版本/version.html">
            
                    
                    蓝鲸产品及开源组件版本
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../.." >配置平台</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
                                <section class="normal markdown-section">
                                
                                <h2 id="&#x5F00;&#x6E90;&#x914D;&#x7F6E;&#x5E73;&#x53F0;&#x66FF;&#x6362;&#x793E;&#x533A;&#x7248;&#x90E8;&#x7F72;&#x6307;&#x5357;">&#x5F00;&#x6E90;&#x914D;&#x7F6E;&#x5E73;&#x53F0;&#x66FF;&#x6362;&#x793E;&#x533A;&#x7248;&#x90E8;&#x7F72;&#x6307;&#x5357;</h2>
<ul>
<li>&#x672C;&#x65B9;&#x6848;&#x76EE;&#x524D;&#x4EC5;&#x9002;&#x7528;&#x4E8E;&#x793E;&#x533A;&#x7248; <code>V5.0.</code> &#x6216;&#x8005;&#x66F4;&#x9AD8;&#x7248;&#x672C;&#x3002;</li>
<li>&#x66FF;&#x6362;&#x524D;&#x8BF7;&#x52A1;&#x5FC5;&#x624B;&#x52A8;&#x5907;&#x4EFD; DB &#x6570;&#x636E; <code>MongoDB</code>&#x3002;</li>
</ul>
<h3 id="&#x80CC;&#x666F;">&#x80CC;&#x666F;</h3>
<p>&#x6709;&#x8BB8;&#x591A;&#x7528;&#x6237;&#x662F;&#x901A;&#x8FC7;&#x84DD;&#x9CB8;&#x793E;&#x533A;&#x7248;&#x5F00;&#x59CB;&#x63A5;&#x89E6; <code>bk-cmdb</code> &#x9879;&#x76EE;&#xFF0C;&#x968F;&#x7740;&#x5BF9;&#x84DD;&#x9CB8;&#x793E;&#x533A;&#x7248;&#x4F7F;&#x7528;&#x9010;&#x6E10;&#x6DF1;&#x5165;&#x4E4B;&#x540E;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x9047;&#x5230;&#x4E9B;&#x529F;&#x80FD;&#x7279;&#x6027;&#x9700;&#x6C42;&#x6216;&#x8005;&#x9700;&#x8981;&#x4FEE;&#x590D;&#x7684; bug&#xFF0C;&#x793E;&#x533A;&#x7248; CMDB &#x9700;&#x8981;&#x968F;&#x7740;&#x84DD;&#x9CB8;&#x667A;&#x4E91;&#x6574;&#x4F53;&#x53D1;&#x5E03;&#x6D41;&#x7A0B;&#x51FA;&#x5305;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x6C42;&#x6216; bugfix &#x4E0D;&#x80FD;&#x5FEB;&#x901F;&#x7684;&#x4F53;&#x73B0;&#x5230;&#x793E;&#x533A;&#x7248;&#x672C;&#x51FA;&#x5305;&#x4E0A;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x793E;&#x533A;&#x7248;&#x4E0D;&#x80FD; CMDB &#x4E0D;&#x80FD;&#x5FEB;&#x901F;&#x8FED;&#x4EE3;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x672C;&#x6587;&#x5728;&#x6B64;&#x63D0;&#x51FA;&#x4E00;&#x79CD;&#x4F7F;&#x7528;&#x5F00;&#x6E90; CMDB &#x66FF;&#x6362;&#x793E;&#x533A;&#x7248; CMDB &#x7684;&#x65B9;&#x6848;&#xFF0C;&#x5F00;&#x6E90;&#x7248;&#x672C; CMDB &#x4ECE; Issue &#x63D0;&#x51FA;&#x5230; pr &#x5408;&#x5165;&#x4E3B;&#x5E72;&#x94FE;&#x8DEF;&#x76F8;&#x6BD4;&#x793E;&#x533A;&#x7248;&#x672C;&#x7701;&#x53BB;&#x4E86;&#x5F88;&#x591A;&#x8017;&#x65F6;&#x7684;&#x6D41;&#x7A0B;&#xFF0C;&#x53EF;&#x4EE5;&#x505A;&#x5230;&#x5FEB;&#x901F;&#x8FED;&#x4EE3;&#x3002;</p>
<h4 id="&#x5F00;&#x6E90;&#x7248;-cmdb-&#x4E0E;&#x793E;&#x533A;&#x7248;-cmdb">&#x5F00;&#x6E90;&#x7248; CMDB &#x4E0E;&#x793E;&#x533A;&#x7248; CMDB</h4>
<p>&#x5F00;&#x6E90;&#x7248;&#x672C;&#x6307;&#x7684;&#x662F; GitHub &#x4E0A;&#x7684; <a href="https://github.com/Tencent/bk-cmdb" target="_blank">&#x5F00;&#x6E90; CMDB &#x9879;&#x76EE;</a>&#xFF0C;&#x793E;&#x533A;&#x7248;&#x6307;&#x7684;&#x662F;&#x4F34;&#x968F; <a href="https://bk.tencent.com/" target="_blank">&#x84DD;&#x9CB8;&#x667A;&#x4E91;</a> &#x4EA7;&#x54C1;&#x4E00;&#x8D77;&#x53D1;&#x5E03;&#x51FA;&#x53BB;&#x7684;&#x793E;&#x533A;&#x7248;&#x3002;</p>
<p>&#x4E24;&#x8005;&#x91C7;&#x7528;&#x7684;&#x6E90;&#x4EE3;&#x7801;&#x662F;&#x4E00;&#x81F4;&#x7684;&#xFF0C;&#x6BD4;&#x5982;&#x60A8;&#x5728;&#x84DD;&#x9CB8;&#x667A;&#x4E91; <a href="https://bk.tencent.com/download/" target="_blank">&#x4E0B;&#x8F7D;&#x9875;&#x9762;</a> &#x770B;&#x5230;&#x7684; CMDB &#x6700;&#x65B0;&#x7248;&#x672C;&#x662F; <code>3.2.2</code>&#xFF0C;&#x5B83;&#x8DDF; GitHub &#x4E0A; <a href="https://github.com/Tencent/bk-cmdb/releases/tag/release-v3.2.2" target="_blank">release-v3.2.2</a> &#x91C7;&#x7528;&#x76F8;&#x540C;&#x4EE3;&#x7801;&#x7F16;&#x8BD1;&#x7ED3;&#x679C;&#x3002;</p>
<p>&#x4E3B;&#x8981;&#x533A;&#x522B;&#x5728;&#x4E8E;&#x4E24;&#x8005;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x793E;&#x533A;&#x7248;&#x672C; CMDB &#x662F;&#x84DD;&#x9CB8;&#x793E;&#x533A;&#x7248;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x542F;&#x52A8;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5BF9;&#x63A5;&#x7684;&#x4E5F;&#x662F;&#x84DD;&#x9CB8;&#x793E;&#x533A;&#x7248;&#xFF0C;&#x6BD4;&#x5982;&#x767B;&#x5F55;&#x5BF9;&#x63A5;&#x7684;&#x84DD;&#x9CB8;&#x7EDF;&#x4E00;&#x767B;&#x5F55;&#xFF0C;&#x6BD4;&#x5982;&#x5373;&#x5C06;&#x63A8;&#x51FA;&#x7684;&#x7EC6;&#x7C92;&#x5EA6;&#x6743;&#x9650;&#x7248;&#x672C;&#x4E5F;&#x4F1A;&#x5BF9;&#x63A5;&#x84DD;&#x9CB8;&#x6743;&#x9650;&#x4E2D;&#x5FC3;&#x3002;&#x76F8;&#x5BF9;&#x800C;&#x8A00;&#xFF0C;&#x5F00;&#x6E90;&#x7248;&#x672C;&#x72EC;&#x7ACB;&#x90E8;&#x7F72;&#xFF0C;&#x6CA1;&#x6709;&#x84DD;&#x9CB8;&#x7EDF;&#x4E00;&#x767B;&#x5F55;&#x4E0E;&#x84DD;&#x9CB8;&#x6743;&#x9650;&#x4E2D;&#x5FC3;&#x7B49;&#x4F9D;&#x8D56;&#x73AF;&#x5883;&#xFF0C;&#x56E0;&#x6B64;&#x4E8C;&#x8FDB;&#x5236;&#x5305;&#x4E2D;&#x9ED8;&#x8BA4;&#x7684;&#x914D;&#x7F6E;&#x662F;&#x91C7;&#x7528;&#x7684;&#x65E0;&#x767B;&#x5F55;&#x548C;&#x5185;&#x7F6E;&#x9274;&#x6743;&#x65B9;&#x6848;&#x3002;</p>
<h4 id="&#x66FF;&#x6362;&#x6709;&#x54EA;&#x4E9B;&#x597D;&#x5904;">&#x66FF;&#x6362;&#x6709;&#x54EA;&#x4E9B;&#x597D;&#x5904;</h4>
<ul>
<li><p>&#x80FD;&#x591F;&#x8F83;&#x5FEB;&#x4F53;&#x9A8C;&#x5230;&#x6700;&#x65B0;&#x7684;&#x529F;&#x80FD;&#x7279;&#x6027;</p>
</li>
<li><p>&#x53EF;&#x4EE5;&#x53CA;&#x65F6;&#x5F97;&#x5230; bugfix</p>
</li>
<li>&#x638C;&#x63E1;&#x66FF;&#x6362;&#x65B9;&#x6CD5;&#x4E4B;&#x540E;&#xFF0C;&#x65B9;&#x4FBF;&#x57FA;&#x4E8E;&#x5F00;&#x6E90;&#x7248;&#x672C;&#x8FDB;&#x884C;&#x4E8C;&#x6B21;&#x5F00;&#x53D1;</li>
</ul>
<h4 id="&#x5347;&#x7EA7;&#x5EFA;&#x8BAE;">&#x5347;&#x7EA7;&#x5EFA;&#x8BAE;</h4>
<ul>
<li><p>&#x505A;&#x597D;&#x5907;&#x4EFD;</p>
</li>
<li><p>&#x7CFB;&#x7EDF;&#x5316;&#x6D4B;&#x8BD5;</p>
</li>
<li><p>&#x5C3D;&#x91CF;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x5927;&#x7248;&#x672C;&#x4E0B;&#x8FDB;&#x884C;&#x5347;&#x7EA7;&#xFF0C;&#x6BD4;&#x5982; <code>3.2.2</code> &#x5347;&#x7EA7;&#x5230; <code>3.2.6</code>&#xFF0C; &#x5B83;&#x4EEC;&#x90FD;&#x662F;&#x6E90;&#x4E8E; <code>3.2.x</code> &#x5206;&#x652F;&#x7684; release&#xFF0C;&#x76F8;&#x5BF9;&#x6765;&#x8BF4;&#x6CA1;&#x6709;&#x5927;&#x7684;&#x529F;&#x80FD;&#x53D8;&#x66F4;&#xFF0C;&#x4E3B;&#x8981;&#x8FDB;&#x884C;&#x4E86;&#x4E00;&#x4E9B;&#x4F18;&#x5316;&#x53CA; bugfix &#x5DE5;&#x4F5C;&#x3002;</p>
</li>
</ul>
<h3 id="&#x66FF;&#x6362;&#x6B65;&#x9AA4;">&#x66FF;&#x6362;&#x6B65;&#x9AA4;</h3>
<p>&#x8FD9;&#x90E8;&#x5206;&#x5185;&#x5BB9;&#x9700;&#x8981;&#x64CD;&#x4F5C;&#x793E;&#x533A;&#x7248;&#x73AF;&#x5883;&#xFF0C;&#x8FD9;&#x91CC;&#x5148;&#x7EDF;&#x4E00;&#x793E;&#x533A;&#x7248;&#x90E8;&#x7F72;&#x6839;&#x76EE;&#x5F55; <code>export BKCE=/data/bkce</code></p>
<h4 id="&#x5907;&#x4EFD;">&#x5907;&#x4EFD;</h4>
<h5 id="&#x5907;&#x4EFD;-mongodb">&#x5907;&#x4EFD; MongoDB</h5>
<ul>
<li><p><code>mongodump --host 127.0.0.1 --port 27017 --out backup/ --db cmdb</code></p>
</li>
<li><p>&#x8BE6;&#x7EC6;&#x8BF7;&#x53C2;&#x8003; <a href="https://docs.mongodb.com/manual/tutorial/backup-and-restore-tools/" target="_blank">Back Up and Restore with MongoDB Tools</a></p>
</li>
</ul>
<h5 id="&#x5907;&#x4EFD;-cmdb">&#x5907;&#x4EFD; CMDB</h5>
<p>&#x5982;&#x679C;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x8DB3;&#x591F;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5907;&#x4EFD;&#x6574;&#x4E2A;&#x793E;&#x533A;&#x7248;&#x3002;</p>
<h4 id="&#x4E0B;&#x8F7D;&#x7F16;&#x8BD1;-cmdb">&#x4E0B;&#x8F7D;&#x7F16;&#x8BD1; CMDB</h4>
<ul>
<li>&#x524D;&#x7F6E;&#x6761;&#x4EF6;&#xFF1A;&#x53EF;&#x4ECE;&#x5916;&#x7F51;&#x4E0B;&#x8F7D; node</li>
</ul>
<p>&#x5982;&#x679C;&#x53EA;&#x662F;&#x4F7F;&#x7528; CMDB&#xFF0C;&#x5EFA;&#x8BAE;&#x4ECE; GitHub &#x4E0B;&#x8F7D;&#x6700;&#x65B0;&#x7684; release &#x4EE3;&#x7801;&#x3002;</p>
<p>&#x7531;&#x4E8E;&#x67D0;&#x4E9B;&#x539F;&#x56E0;&#xFF0C;&#x8F83;&#x65B0;&#x7248;&#x672C;&#x7684; release &#x91CC;&#x9762;&#xFF0C;&#x6682;&#x65F6;&#x6CA1;&#x80FD;&#x63D0;&#x4F9B;&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;&#xFF0C;&#x9700;&#x8981;&#x81EA;&#x884C;&#x7F16;&#x8BD1;&#x3002;</p>
<pre><code class="lang-bash">workspace=tmp1
release=v3.2.8

mkdir -p <span class="hljs-variable">${workspace}</span>
<span class="hljs-built_in">cd</span> <span class="hljs-variable">${workspace}</span>
<span class="hljs-built_in">export</span> GOPATH=$(<span class="hljs-built_in">pwd</span>)
wget https://github.com/Tencent/bk-cmdb/archive/release-<span class="hljs-variable">${release}</span>.tar.gz
tar -xf release-<span class="hljs-variable">${release}</span>.tar.gz
mkdir src
mv bk-cmdb-release-<span class="hljs-variable">${release}</span> src/configcenter
<span class="hljs-built_in">cd</span> src/configcenter/src

GITHASH=<span class="hljs-variable">${release}</span> GITTAG=ocr-<span class="hljs-variable">${release}</span> VERSION=<span class="hljs-variable">${release}</span> make
</code></pre>
<h4 id="&#x751F;&#x6210;&#x914D;&#x7F6E;">&#x751F;&#x6210;&#x914D;&#x7F6E;</h4>
<p>&#x65B0;&#x7248;&#x672C;&#x4E2D;&#x53EF;&#x80FD;&#x4F1A;&#x8FDB;&#x884C;&#x76F8;&#x5E94;&#x7684;&#x8C03;&#x6574;&#xFF0C;&#x6BD4;&#x5982;&#x65B0;&#x589E;&#x4E00;&#x4E9B;&#x914D;&#x7F6E;&#x5B57;&#x6BB5;&#xFF0C;&#x4E3A;&#x4E86;&#x4FDD;&#x969C;&#x5347;&#x7EA7;&#x540E;&#x7684;&#x7A0B;&#x5E8F;&#x6B63;&#x5E38;&#x8FD0;&#x884C;&#xFF0C;&#x6700;&#x597D;&#x57FA;&#x4E8E;&#x65B0;&#x7248;&#x672C;&#x91CD;&#x65B0;&#x751F;&#x6210;&#x4E00;&#x4EFD;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3002;</p>
<p>&#x751F;&#x6210;&#x914D;&#x7F6E;&#x65F6;&#x9700;&#x8981;&#x7528;&#x793E;&#x533A;&#x7248;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5BF9;&#x5E94;&#x7684;&#x914D;&#x7F6E;&#x53C2;&#x6570;&#x91CD;&#x65B0;&#x751F;&#x6210;&#x914D;&#x7F6E;&#xFF0C;&#x793E;&#x533A;&#x7248; CMDB &#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E00;&#x822C;&#x5728;&#x76EE;&#x5F55; <code>${BKCE}/cmdb/server/conf/</code> &#x4E2D;&#x3002;</p>
<pre><code class="lang-bash">[root@VM_1_210_centos ~]<span class="hljs-comment"># ll ${BKCE}cmdb/server/conf/</span>
total 44
-rw-r--r-- 1 root root   0 Apr 17 21:00 apiserver.conf
-rw-r--r-- 1 root root 188 Apr 17 21:00 auditcontroller.conf
-rw-r--r-- 1 root root 833 Apr 17 21:00 datacollection.conf
-rw-r--r-- 1 root root 292 Apr 17 21:00 eventserver.conf
-rw-r--r-- 1 root root 126 Apr 17 21:00 host.conf
-rw-r--r-- 1 root root 292 Apr 17 21:00 hostcontroller.conf
-rw-r--r-- 1 root root 473 Apr 17 21:00 migrate.conf
-rw-r--r-- 1 root root 355 Apr 17 21:00 objectcontroller.conf
-rw-r--r-- 1 root root 291 Apr 17 21:00 proc.conf
-rw-r--r-- 1 root root 292 Apr 17 21:00 proccontroller.conf
-rw-r--r-- 1 root root 202 Apr 17 21:00 topo.conf
-rw-r--r-- 1 root root 709 Apr 17 21:00 webserver.conf
[root@VM_1_210_centos ~]<span class="hljs-comment">#</span>
</code></pre>
<p>&#x53EF;&#x53C2;&#x8003;&#x5982;&#x4E0B;&#x751F;&#x6210;&#x914D;&#x7F6E;&#x793A;&#x4F8B;&#x8FDB;&#x884C;&#x76F8;&#x5E94;&#x8C03;&#x6574;&#xFF1A;</p>
<pre><code class="lang-bash"><span class="hljs-built_in">cd</span> bin/build/v3.2.8

./init.py --discovery 127.0.0.1:2181 \
--database cmdb \
--redis_ip 127.0.0.1 \
--redis_port 6379 \
--redis_pass 1234 \
--mongo_ip 127.0.0.1 \
--mongo_port 27017 \
--mongo_user cc \
--mongo_pass cc \
--blueking_cmdb_url http://bk.tencent.com \
--blueking_paas_url http://bk.tencent.com \
--listen_port 8083

&#x279C;  v3.2.8 tree cmdb_adminserver/configures
cmdb_adminserver/configures
&#x251C;&#x2500;&#x2500; apiserver.conf
&#x251C;&#x2500;&#x2500; auditcontroller.conf
&#x251C;&#x2500;&#x2500; datacollection.conf
&#x251C;&#x2500;&#x2500; eventserver.conf
&#x251C;&#x2500;&#x2500; host.conf
&#x251C;&#x2500;&#x2500; hostcontroller.conf
&#x251C;&#x2500;&#x2500; migrate.conf
&#x251C;&#x2500;&#x2500; objectcontroller.conf
&#x251C;&#x2500;&#x2500; proc.conf
&#x251C;&#x2500;&#x2500; proccontroller.conf
&#x251C;&#x2500;&#x2500; topo.conf
&#x2514;&#x2500;&#x2500; webserver.conf
</code></pre>
<p>&#x5347;&#x7EA7;&#x524D;&#x540E;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5BF9;&#x6BD4;&#x5DE5;&#x5177;&#x8FDB;&#x4E00;&#x6B65;&#x67E5;&#x770B;&#x5347;&#x7EA7;&#x524D;&#x540E;&#x914D;&#x7F6E;&#x7684;&#x533A;&#x522B;&#xFF0C;&#x4FDD;&#x969C;&#x751F;&#x6210;&#x6B63;&#x786E;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3002;&#x4E00;&#x79CD;&#x6BD4;&#x8F83;&#x6709;&#x6548;&#x7684;&#x65B9;&#x5F0F;&#x65F6;&#x901A;&#x8FC7; Git &#x6765;&#x7BA1;&#x7406;&#x8FD9;&#x4E9B;&#x914D;&#x7F6E;&#xFF0C;&#x901A;&#x8FC7; pr &#x7684;&#x65B9;&#x5F0F;&#x67E5;&#x770B;&#x914D;&#x7F6E;&#x5347;&#x7EA7;&#x524D;&#x540E;&#x7684;&#x533A;&#x522B;&#x3002;</p>
<h4 id="&#x505C;&#x6B62;-cmdb">&#x505C;&#x6B62; CMDB</h4>
<pre><code class="lang-bash">supervisorctl -c <span class="hljs-variable">${BKCE}</span>/etc/supervisor-cmdb-server.conf stop all
supervisorctl -c <span class="hljs-variable">${BKCE}</span>/etc/supervisor-cmdb-server.conf status
</code></pre>
<h4 id="&#x66F4;&#x65B0;&#x4E8C;&#x8FDB;&#x5236;&#x548C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;">&#x66F4;&#x65B0;&#x4E8C;&#x8FDB;&#x5236;&#x548C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</h4>
<h5 id="&#x66F4;&#x65B0;&#x4E8C;&#x8FDB;&#x5236;">&#x66F4;&#x65B0;&#x4E8C;&#x8FDB;&#x5236;</h5>
<pre><code class="lang-bash"><span class="hljs-meta">#!/bin/bash
</span>
<span class="hljs-built_in">cd</span> tmp/src/configcenter/src/bin/build/v3.2.8
files=<span class="hljs-string">&quot;<span class="hljs-variable">$(find . -type f -name &quot;cmdb_*&quot;)</span>&quot;</span>
<span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> <span class="hljs-variable">$files</span>;<span class="hljs-keyword">do</span>
    cp <span class="hljs-_">-f</span> <span class="hljs-variable">${file}</span> <span class="hljs-variable">${BKCE}</span>/cmdb/server/bin/
<span class="hljs-keyword">done</span>

cp -rf web <span class="hljs-variable">${BKCE}</span>/cmdb/
</code></pre>
<h5 id="&#x66F4;&#x65B0;&#x56FD;&#x9645;&#x5316;&#x6570;&#x636E;">&#x66F4;&#x65B0;&#x56FD;&#x9645;&#x5316;&#x6570;&#x636E;</h5>
<pre><code class="lang-bash">cp -rf cmdb_adminserver/conf/errors <span class="hljs-variable">${BKCE}</span>/cmdb/
cp -rf cmdb_adminserver/conf/language/ <span class="hljs-variable">${BKCE}</span>/cmdb/
</code></pre>
<h5 id="&#x66F4;&#x65B0;&#x8FDB;&#x7A0B;&#x914D;&#x7F6E;">&#x66F4;&#x65B0;&#x8FDB;&#x7A0B;&#x914D;&#x7F6E;</h5>
<pre><code class="lang-bash">cp -rf cmdb_adminserver/configures <span class="hljs-variable">${BKCE}</span>/cmdb/server/conf
</code></pre>
<h4 id="&#x542F;&#x52A8;&#x5F00;&#x6E90;&#x7248;&#x672C;">&#x542F;&#x52A8;&#x5F00;&#x6E90;&#x7248;&#x672C;</h4>
<pre><code class="lang-bash">supervisorctl -c <span class="hljs-variable">${BKCE}</span>/etc/supervisor-cmdb-server.conf start all
supervisorctl -c <span class="hljs-variable">${BKCE}</span>/etc/supervisor-cmdb-server.conf status
</code></pre>
<h4 id="migrate">migrate</h4>
<p>&#x5F00;&#x6E90;&#x7248;&#x672C;&#x4E2D;&#x6709;&#x4E2A; <code>init_db.sh</code> &#x811A;&#x672C;&#x7528;&#x6765;&#x5347;&#x7EA7;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x8BE5;&#x811A;&#x672C;&#x5176;&#x5B9E;&#x662F;&#x60F3; Adminserver &#x53D1;&#x8D77;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#xFF0C;&#x7531; Adminserver &#x6267;&#x884C;&#x5347;&#x7EA7;&#x64CD;&#x4F5C;&#x3002;&#x505A; MongoDB &#x6570;&#x636E;&#x5347;&#x7EA7;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x6267;&#x884C;&#x8BE5;&#x811A;&#x672C;&#xFF0C;&#x6216;&#x8005;&#x76F4;&#x63A5;&#x8C03;&#x7528; Adminserver &#x7684; HTTP &#x63A5;&#x53E3;&#x3002;</p>
<pre><code class="lang-bash">curl -X POST -H <span class="hljs-string">&apos;Content-Type:application/json&apos;</span> -H <span class="hljs-string">&apos;BK_USER:migrate&apos;</span> -H <span class="hljs-string">&apos;HTTP_BLUEKING_SUPPLIER_ID:0&apos;</span> http://<span class="hljs-variable">${adminserver}</span>:60004/migrate/v3/migrate/community/0
</code></pre>
<h4 id="&#x9A8C;&#x8BC1;">&#x9A8C;&#x8BC1;</h4>
<p>&#x6267;&#x884C;&#x5230;&#x8FD9;&#x4E00;&#x6B65;&#xFF0C;&#x8BF4;&#x660E;&#x5347;&#x7EA7;&#x64CD;&#x4F5C;&#x6D41;&#x7A0B;&#x57FA;&#x672C;&#x6267;&#x884C;&#x5B8C;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x5E76;&#x4E0D;&#x610F;&#x5473;&#x7740;&#x5347;&#x7EA7;&#x6210;&#x529F;&#xFF0C;&#x53EA;&#x6709;&#x7ECF;&#x8FC7;&#x60A8;&#x53CD;&#x590D;&#x9A8C;&#x8BC1;&#x540E;&#x7684;&#x5347;&#x7EA7;&#x624D;&#x7B97;&#x5B8C;&#x6210;&#x3002;</p>
<h4 id="&#x95EE;&#x9898;&#x53CD;&#x9988;">&#x95EE;&#x9898;&#x53CD;&#x9988;</h4>
<p>&#x5982;&#x679C;&#x66FF;&#x6362;&#x8FC7;&#x7A0B;&#x9047;&#x5230;&#x65E0;&#x6CD5;&#x8FDB;&#x884C;&#x4E0B;&#x53BB;&#xFF0C;&#x53EF;&#x4EE5;&#x5148;&#x5230; GitHub CMDB &#x4E0A;&#x641C;&#x7D22;&#x76F8;&#x5173;&#x95EE;&#x9898;&#xFF0C;&#x53EF;&#x80FD;&#x4F60;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;&#x524D;&#x4EBA;&#x5DF2;&#x7ECF;&#x8E29;&#x8FC7;&#x5751;&#x4E86;&#x3002;&#x5982;&#x679C;&#x4ECD;&#x7136;&#x627E;&#x4E0D;&#x5230;&#x7B54;&#x6848;&#xFF0C;&#x53EF;&#x4EE5;&#x5230;&#x84DD;&#x9CB8; CMDB &#x5F00;&#x6E90;&#x5F00;&#x53D1;&#x4EA4;&#x6D41; 305496802 &#x54A8;&#x8BE2;&#xFF0C;&#x6216;&#x8005;&#x76F4;&#x63A5;&#x5728; GitHub &#x591A;&#x3002;&#x6BD4;&#x5982;&#x73B0;&#x5728;&#x7528;&#x7684;&#x54EA;&#x4E2A;&#x7248;&#x672C; CMDB&#xFF0C;&#x5F00;&#x6E90;&#x7248;&#x672C;&#x8FD8;&#x662F;&#x793E;&#x533A;&#x7248;&#x672C;&#xFF0C;&#x7248;&#x672C;&#x53F7;&#x591A;&#x5C11;&#xFF0C;&#x9047;&#x5230;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x671F;&#x671B;&#x5F97;&#x5230;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x6548;&#x679C;&#x7B49;&#x7B49;&#xFF0C;&#x63D0;&#x95EE;&#x65F6;&#x4F60;&#x53EF;&#x4EE5;&#x6362;&#x4E2A;&#x89D2;&#x5EA6;&#x601D;&#x8003;&#x4E0B;&#xFF0C;&#x95EE;&#x9898;&#x662F;&#x5426;&#x8DB3;&#x591F;&#x6E05;&#x6670;&#xFF0C;&#x80CC;&#x666F;&#x4FE1;&#x606F;&#x662F;&#x5426;&#x8DB3;&#x591F;&#x3002;&#x53C2;&#x8003; <a href="https://www.zhihu.com/question/62887673" target="_blank">&#x5982;&#x4F55;&#x5728; GitHub &#x4E0A;&#x6B63;&#x786E;&#x7684;&#x63D0; Issue&#xFF1F;</a></p>
<h4 id="&#x66F4;&#x65B0;&#x7248;&#x672C;&#x53F7;&#x4FE1;&#x606F;">&#x66F4;&#x65B0;&#x7248;&#x672C;&#x53F7;&#x4FE1;&#x606F;</h4>
<ul>
<li><p><code>VERSION</code></p>
</li>
<li><p><code>projects.yaml</code></p>
</li>
</ul>
<p>&#x4E3B;&#x8981;&#x66F4;&#x65B0;&#x5404;&#x4E2A; CMDB Server &#x7684; version &#x5B57;&#x6BB5;</p>
<pre><code class="lang-yaml"><span class="hljs-attr">- name:</span> cmdb_coreservice
<span class="hljs-attr">  module:</span> cmdb
<span class="hljs-attr">  project_dir:</span> cmdb/server/bin
<span class="hljs-attr">  alias:</span> cmdb_coreservice
<span class="hljs-attr">  role:</span> <span class="hljs-string">&quot;node&quot;</span>
<span class="hljs-attr">  language:</span> golang
<span class="hljs-attr">  version:</span> <span class="hljs-number">3.2</span><span class="hljs-number">.8</span>
<span class="hljs-attr">  version_type:</span> oc
</code></pre>
<h3 id="&#x5E38;&#x89C1;&#x95EE;&#x9898;&#x89E3;&#x51B3;">&#x5E38;&#x89C1;&#x95EE;&#x9898;&#x89E3;&#x51B3;</h3>
<h4 id="make-&#x65F6;-git-&#x547D;&#x4EE4;&#x6267;&#x884C;&#x62A5;&#x9519;">make &#x65F6; git &#x547D;&#x4EE4;&#x6267;&#x884C;&#x62A5;&#x9519;</h4>
<p>&#x73B0;&#x8C61;&#xFF1A;</p>
<pre><code class="lang-plain">go build -i -ldflags &quot;-X configcenter/src/common/version.CCVersion= -X configcenter/src/common/version.CCBuildTime=2019-05-09T14:35:01+0800 -X configcenter/src/common/version.CCGitHash= -X configcenter/src/common/version.CCTag=&quot; -o tmp/src/configcenter/src/bin/build/cmdb_proccontroller/cmdb_proccontroller
fatal: not a git repository (or any of the parent directories): .git
fatal: not a git repository (or any of the parent directories): .git
fatal: not a git repository (or any of the parent directories): .git
fatal: not a git repository (or any of the parent directories): .git
</code></pre>
<p>&#x539F;&#x56E0;&#xFF1A;&#x5E38;&#x89C4; make &#x65F6;&#x9ED8;&#x8BA4;&#x4ECE; Git &#x7248;&#x672C;&#x4E2D;&#x63D0;&#x53D6;</p>
<p>&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#xFF1A;&#x8BBE;&#x7F6E; GITHASH&#xFF0C;GITTAG&#xFF0C;VERSION &#x8FD9;&#x4E09;&#x4E2A;&#x7F16;&#x8BD1;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF0C;&#x5982; <code>GITHASH=xxx GITTAG=ocr-v3.2.8 VERSION=v3.2.8 make</code></p>
<h4 id="make-&#x65F6;&#x63D0;&#x793A;-generatepy-&#x8BED;&#x6CD5;&#x95EE;&#x9898;">make &#x65F6;&#x63D0;&#x793A; <code>generate.py</code> &#x8BED;&#x6CD5;&#x95EE;&#x9898;</h4>
<p>&#x51FA;&#x9519;&#x73B0;&#x8C61;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code class="lang-bash">go build -i -ldflags <span class="hljs-string">&quot;-X configcenter/src/common/version.CCVersion=v3.2.8-t -X configcenter/src/common/version.CCBuildTime=2019-05-09T15:00:38+0800 -X configcenter/src/common/version.CCGitHash=xxx-t -X configcenter/src/common/version.CCTag=release-v3.2.8-t&quot;</span> -o tmp/src/configcenter/src/bin/build/v3.2.8-t/cmdb_webserver/cmdb_webserver
File <span class="hljs-string">&quot;./generate.py&quot;</span>, line 55
<span class="hljs-built_in">print</span> <span class="hljs-string">&apos;generate.py -t &lt;target&gt;  -i &lt;base_image&gt; -o &lt;output&gt;&apos;</span>
                                                           ^
SyntaxError: Missing parentheses <span class="hljs-keyword">in</span> call to <span class="hljs-string">&apos;print&apos;</span>. Did you mean <span class="hljs-built_in">print</span>(<span class="hljs-string">&apos;generate.py -t &lt;target&gt;  -i &lt;base_image&gt; -o &lt;output&gt;&apos;</span>)?
make: *** [default] Error 1
</code></pre>
<p>&#x95EE;&#x9898;&#x4F4D;&#x7F6E;&#xFF1A;</p>
<pre><code class="lang-bash">&#x279C;  src grep -n generate.py Makefile
13:    @<span class="hljs-built_in">cd</span> $(SCRIPT_DIR) &amp;&amp; python ./generate.py -t <span class="hljs-string">&apos;$(BIN_PATH)&apos;</span> -i <span class="hljs-string">&apos;${IMAGE}&apos;</span> -o <span class="hljs-string">&apos;$(BIN_PATH)/docker&apos;</span>
23:    @<span class="hljs-built_in">cd</span> $(SCRIPT_DIR) &amp;&amp; python ./generate.py -t <span class="hljs-string">&apos;$(BIN_PATH)&apos;</span> -i <span class="hljs-string">&apos;${IMAGE}&apos;</span> -o <span class="hljs-string">&apos;$(BIN_PATH)/docker&apos;</span>
38:    @<span class="hljs-built_in">cd</span> $(SCRIPT_DIR) &amp;&amp; python ./generate.py -t <span class="hljs-string">&apos;$(BIN_PATH)&apos;</span> -i <span class="hljs-string">&apos;${IMAGE}&apos;</span> -o <span class="hljs-string">&apos;$(BIN_PATH)/docker&apos;</span>
</code></pre>
<p>&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#xFF1A;</p>
<ul>
<li>&#x65B9;&#x6CD5;&#x4E00;: &#x5207;&#x6362;&#x5230; python 2 &#x73AF;&#x5883;&#x540E;&#x91CD;&#x65B0;&#x7F16;&#x8BD1;: &#x901A;&#x8FC7; virtualenv</li>
</ul>
<pre><code class="lang-plain">mkvirtualenv bk-cmdb -p /usr/local/bin/python2
</code></pre>
<ul>
<li><p>&#x65B9;&#x6CD5;&#x4E8C;: &#x5207;&#x6362;&#x5230; python 2 &#x73AF;&#x5883;&#x540E;&#x91CD;&#x65B0;&#x7F16;&#x8BD1;: &#x76F4;&#x63A5;&#x4FEE;&#x6539; python &#x8DEF;&#x5F84;&#xFF0C;&#x6BD4;&#x5982;&#x6539;&#x6210; <code>/usr/local/bin/python2</code></p>
</li>
<li><p>&#x65B9;&#x6CD5;&#x4E09;: &#x5982;&#x679C;&#x4E0D;&#x9700;&#x8981;&#x751F;&#x6210; dockerfile &#x6587;&#x4EF6;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x4E0A;&#x8FF0;&#x4E09;&#x884C;&#x4EE3;&#x7801;&#x5220;&#x9664;&#x4E86;&#xFF0C;&#x518D;&#x91CD;&#x65B0;&#x7F16;&#x8BD1;</p>
</li>
</ul>

                                
                                </section>
                            
                        </div>
                    </div>
                
            </div>

            
                
                <a href="../Paas平台/replace_paas_with_opensource_version.html" class="navigation navigation-prev " aria-label="Previous page: PaaS 平台">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../标准运维/replace_sops_with_opensource_version.html" class="navigation navigation-next " aria-label="Next page: 标准运维">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"配置平台","level":"2.9.3.3","depth":3,"next":{"title":"标准运维","level":"2.9.3.4","depth":3,"path":"场景案例/开源产品替换/标准运维/replace_sops_with_opensource_version.md","ref":"场景案例/开源产品替换/标准运维/replace_sops_with_opensource_version.md","articles":[]},"previous":{"title":"PaaS 平台","level":"2.9.3.2","depth":3,"path":"场景案例/开源产品替换/Paas平台/replace_paas_with_opensource_version.md","ref":"场景案例/开源产品替换/Paas平台/replace_paas_with_opensource_version.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-search","-lunr","-sharing","highlight","html5-video","splitter","livereload"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"html5-video":{},"splitter":{},"livereload":{},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"zh-hans","gitbook":"*"},"file":{"path":"场景案例/开源产品替换/配置平台/replace_cmdb_with_opensource_version.md","mtime":"2019-09-09T03:19:52.210Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-09-12T09:09:04.084Z"},"basePath":"../../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../../gitbook/gitbook.js"></script>
    <script src="../../../gitbook/theme.js"></script>
    
        
        <script src="../../../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

